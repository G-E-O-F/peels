!function(t){function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";function i(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n["default"]=t,n}function r(t){return t&&t.__esModule?t:{"default":t}}var o=e(5),a=r(o),u=e(14),c=i(u);onmessage=function(t){var n=t.data||{},e=new a["default"](n),i=c[n.coloration]?c[n.coloration]:c["default"];e.toCG({colorFn:i,type:n.geometryType||"fields"},function(t,n){postMessage(n)})}},function(t,n){"use strict";function e(t,n){var e=n||1;return{x:e*v(t.φ)*v(t.λ),z:e*v(t.φ)*y(t.λ),y:e*y(t.φ)}}function i(t){var n=t.x,e=t.y,i=t.z,r=g(n*n+e*e+i*i);return{r:r,"φ":d(e/r),"λ":h(i,n)}}function r(t,n){return 2*d(g(Math.pow(y((t.φ-n.φ)/2),2)+v(t.φ)*v(n.φ)*Math.pow(y((t.λ-n.λ)/2),2)))}function o(t,n){var e,i=r(t,n),o={};return e=y(n.λ-t.λ)<0?p((y(n.φ)-y(t.φ)*v(i))/(y(i)*v(t.φ))):2*f-p((y(n.φ)-y(t.φ)*v(i))/(y(i)*v(t.φ))),o.d=i,o.a=e,o}function a(t,n){var e=Math.cos(n.φ)*Math.cos(n.λ-t.λ),i=Math.cos(n.φ)*Math.sin(n.λ-t.λ);return{"φ":h(y(t.φ)+y(n.φ),g((v(t.φ)+e)*(v(t.φ)+e)+i*i)),"λ":t.λ+h(i,v(t.φ)+e)}}function u(t,n,e){for(var i=[],o=1;e>o;o+=1){var a=o/e,u=r(t,n),c=y((1-a)*u)/y(u),l=y(a*u)/y(u),s=c*v(t.φ)*v(t.λ)+l*v(n.φ)*v(n.λ),f=c*v(t.φ)*y(t.λ)+l*v(n.φ)*y(n.λ),p=c*y(t.φ)+l*y(n.φ);i.push({"φ":h(p,g(Math.pow(s,2)+Math.pow(f,2))),"λ":h(f,s)})}return i}function c(){for(var t=arguments,n={x:0,y:0,z:0},r={},o=function(i){var r=e(t[i]);m.forEach(function(t){n[t]+=r[t]})},a=0;a<arguments.length;a+=1)o(a);m.forEach(function(e){r[e]=n[e]/t.length});var u=i(r);return{"φ":u.φ,"λ":u.λ}}function l(t){var n=t._divisions,e={x:2*n-1,y:n-1};t.get("SOUTH").position={"λ":0,"φ":f/-2},t.get("NORTH").position={"λ":0,"φ":f/2};for(var i=0;s>i;i+=1){var r=2*i/5*f,o=2*i/5*f+f/5;t.get(i,n-1,0).position={"λ":r,"φ":f/2-_},t.get(i,e.x,0).position={"λ":o,"φ":f/-2+_}}if(n-1>0)for(var a=0;s>a;a+=1)for(var c=(a+4)%5,l=t.get("NORTH"),p=t.get("SOUTH"),d=t.get(a,n-1,0),h=t.get(c,n-1,0),v=t.get(a,e.x,0),y=t.get(c,e.x,0),g=u(l.position,d.position,n),m=u(d.position,h.position,n),x=u(d.position,y.position,n),F=u(d.position,v.position,n),w=u(v.position,y.position,n),j=u(v.position,p.position,n),T=1;n>T;T+=1){var k=t.get(a,T-1,0),A=t.get(a,n-1-T,T),b=t.get(a,n-1,T),O=t.get(a,n-1+T,0),I=t.get(a,e.x-T,T),S=t.get(a,e.x,T);k.position=g[T-1],A.position=m[T-1],b.position=x[T-1],O.position=F[T-1],I.position=w[T-1],S.position=j[T-1]}if(n-2>0)for(var M=0;s>M;M+=1)for(var E=0;2*n>E;E+=1)if((E+1)%n>0)for(var H=n-(E+1)%n,z=H-1,U=n-1-H,P=t.get(M,E,0),N=t.get(M,E,H),C=t.get(M,E,n-1)._adjacentFields[2],R=u(P.position,N.position,z+1),L=u(N.position,C.position,U+1),q=1;n>q;q+=1)H>q&&(t.get(M,E,q).position=R[q-1]),q>H&&(t.get(M,E,q).position=L[q-H-1])}var s=5,f=Math.PI,p=Math.acos,d=Math.asin,h=Math.atan2,v=Math.cos,y=Math.sin,g=Math.sqrt,_=p(Math.sqrt(5)/5),m=["x","y","z"];t.exports={populate:l,toCartesian:e,centroid:c,midpoint:a,interpolate:u,course:o,distance:r}},function(t,n,e){(function(t,i){function r(t,n){this._id=t,this._clearFn=n}var o=e(3).nextTick,a=Function.prototype.apply,u=Array.prototype.slice,c={},l=0;n.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;n>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},n))},n.setImmediate="function"==typeof t?t:function(t){var e=l++,i=arguments.length<2?!1:u.call(arguments,1);return c[e]=!0,o(function(){c[e]&&(i?t.apply(null,i):t.call(null),n.clearImmediate(e))}),e},n.clearImmediate="function"==typeof i?i:function(t){delete c[t]}}).call(n,e(2).setImmediate,e(2).clearImmediate)},function(t,n){function e(){l=!1,a.length?c=a.concat(c):s=-1,c.length&&i()}function i(){if(!l){var t=setTimeout(e);l=!0;for(var n=c.length;n;){for(a=c,c=[];++s<n;)a&&a[s].run();s=-1,n=c.length}a=null,l=!1,clearTimeout(t)}}function r(t,n){this.fun=t,this.array=n}function o(){}var a,u=t.exports={},c=[],l=!1,s=-1;u.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new r(t,n)),1!==c.length||l||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(t,n,e){var i,r;(function(e,o){/*!
	 * async
	 * https://github.com/caolan/async
	 *
	 * Copyright 2010-2014 Caolan McMahon
	 * Released under the MIT license
	 */
!function(){function a(t){var n=!1;return function(){if(n)throw new Error("Callback was already called.");n=!0,t.apply(u,arguments)}}var u,c,l={};u=this,null!=u&&(c=u.async),l.noConflict=function(){return u.async=c,l};var s=Object.prototype.toString,f=Array.isArray||function(t){return"[object Array]"===s.call(t)},p=function(t,n){for(var e=0;e<t.length;e+=1)n(t[e],e,t)},d=function(t,n){if(t.map)return t.map(n);var e=[];return p(t,function(t,i,r){e.push(n(t,i,r))}),e},h=function(t,n,e){return t.reduce?t.reduce(n,e):(p(t,function(t,i,r){e=n(e,t,i,r)}),e)},v=function(t){if(Object.keys)return Object.keys(t);var n=[];for(var e in t)t.hasOwnProperty(e)&&n.push(e);return n};"undefined"!=typeof e&&e.nextTick?(l.nextTick=e.nextTick,"undefined"!=typeof o?l.setImmediate=function(t){o(t)}:l.setImmediate=l.nextTick):"function"==typeof o?(l.nextTick=function(t){o(t)},l.setImmediate=l.nextTick):(l.nextTick=function(t){setTimeout(t,0)},l.setImmediate=l.nextTick),l.each=function(t,n,e){function i(n){n?(e(n),e=function(){}):(r+=1,r>=t.length&&e())}if(e=e||function(){},!t.length)return e();var r=0;p(t,function(t){n(t,a(i))})},l.forEach=l.each,l.eachSeries=function(t,n,e){if(e=e||function(){},!t.length)return e();var i=0,r=function(){n(t[i],function(n){n?(e(n),e=function(){}):(i+=1,i>=t.length?e():r())})};r()},l.forEachSeries=l.eachSeries,l.eachLimit=function(t,n,e,i){var r=y(n);r.apply(null,[t,e,i])},l.forEachLimit=l.eachLimit;var y=function(t){return function(n,e,i){if(i=i||function(){},!n.length||0>=t)return i();var r=0,o=0,a=0;!function u(){if(r>=n.length)return i();for(;t>a&&o<n.length;)o+=1,a+=1,e(n[o-1],function(t){t?(i(t),i=function(){}):(r+=1,a-=1,r>=n.length?i():u())})}()}},g=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[l.each].concat(n))}},_=function(t,n){return function(){var e=Array.prototype.slice.call(arguments);return n.apply(null,[y(t)].concat(e))}},m=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[l.eachSeries].concat(n))}},x=function(t,n,e,i){if(n=d(n,function(t,n){return{index:n,value:t}}),i){var r=[];t(n,function(t,n){e(t.value,function(e,i){r[t.index]=i,n(e)})},function(t){i(t,r)})}else t(n,function(t,n){e(t.value,function(t){n(t)})})};l.map=g(x),l.mapSeries=m(x),l.mapLimit=function(t,n,e,i){return F(n)(t,e,i)};var F=function(t){return _(t,x)};l.reduce=function(t,n,e,i){l.eachSeries(t,function(t,i){e(n,t,function(t,e){n=e,i(t)})},function(t){i(t,n)})},l.inject=l.reduce,l.foldl=l.reduce,l.reduceRight=function(t,n,e,i){var r=d(t,function(t){return t}).reverse();l.reduce(r,n,e,i)},l.foldr=l.reduceRight;var w=function(t,n,e,i){var r=[];n=d(n,function(t,n){return{index:n,value:t}}),t(n,function(t,n){e(t.value,function(e){e&&r.push(t),n()})},function(t){i(d(r.sort(function(t,n){return t.index-n.index}),function(t){return t.value}))})};l.filter=g(w),l.filterSeries=m(w),l.select=l.filter,l.selectSeries=l.filterSeries;var j=function(t,n,e,i){var r=[];n=d(n,function(t,n){return{index:n,value:t}}),t(n,function(t,n){e(t.value,function(e){e||r.push(t),n()})},function(t){i(d(r.sort(function(t,n){return t.index-n.index}),function(t){return t.value}))})};l.reject=g(j),l.rejectSeries=m(j);var T=function(t,n,e,i){t(n,function(t,n){e(t,function(e){e?(i(t),i=function(){}):n()})},function(t){i()})};l.detect=g(T),l.detectSeries=m(T),l.some=function(t,n,e){l.each(t,function(t,i){n(t,function(t){t&&(e(!0),e=function(){}),i()})},function(t){e(!1)})},l.any=l.some,l.every=function(t,n,e){l.each(t,function(t,i){n(t,function(t){t||(e(!1),e=function(){}),i()})},function(t){e(!0)})},l.all=l.every,l.sortBy=function(t,n,e){l.map(t,function(t,e){n(t,function(n,i){n?e(n):e(null,{value:t,criteria:i})})},function(t,n){if(t)return e(t);var i=function(t,n){var e=t.criteria,i=n.criteria;return i>e?-1:e>i?1:0};e(null,d(n.sort(i),function(t){return t.value}))})},l.auto=function(t,n){n=n||function(){};var e=v(t),i=e.length;if(!i)return n();var r={},o=[],a=function(t){o.unshift(t)},u=function(t){for(var n=0;n<o.length;n+=1)if(o[n]===t)return void o.splice(n,1)},c=function(){i--,p(o.slice(0),function(t){t()})};a(function(){if(!i){var t=n;n=function(){},t(null,r)}}),p(e,function(e){var i=f(t[e])?t[e]:[t[e]],o=function(t){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1&&(i=i[0]),t){var o={};p(v(r),function(t){o[t]=r[t]}),o[e]=i,n(t,o),n=function(){}}else r[e]=i,l.setImmediate(c)},s=i.slice(0,Math.abs(i.length-1))||[],d=function(){return h(s,function(t,n){return t&&r.hasOwnProperty(n)},!0)&&!r.hasOwnProperty(e)};if(d())i[i.length-1](o,r);else{var y=function(){d()&&(u(y),i[i.length-1](o,r))};a(y)}})},l.retry=function(t,n,e){var i=5,r=[];"function"==typeof t&&(e=n,n=t,t=i),t=parseInt(t,10)||i;var o=function(i,o){for(var a=function(t,n){return function(e){t(function(t,i){e(!t||n,{err:t,result:i})},o)}};t;)r.push(a(n,!(t-=1)));l.series(r,function(t,n){n=n[n.length-1],(i||e)(n.err,n.result)})};return e?o():o},l.waterfall=function(t,n){if(n=n||function(){},!f(t)){var e=new Error("First argument to waterfall must be an array of functions");return n(e)}if(!t.length)return n();var i=function(t){return function(e){if(e)n.apply(null,arguments),n=function(){};else{var r=Array.prototype.slice.call(arguments,1),o=t.next();o?r.push(i(o)):r.push(n),l.setImmediate(function(){t.apply(null,r)})}}};i(l.iterator(t))()};var k=function(t,n,e){if(e=e||function(){},f(n))t.map(n,function(t,n){t&&t(function(t){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),n.call(null,t,e)})},e);else{var i={};t.each(v(n),function(t,e){n[t](function(n){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),i[t]=r,e(n)})},function(t){e(t,i)})}};l.parallel=function(t,n){k({map:l.map,each:l.each},t,n)},l.parallelLimit=function(t,n,e){k({map:F(n),each:y(n)},t,e)},l.series=function(t,n){if(n=n||function(){},f(t))l.mapSeries(t,function(t,n){t&&t(function(t){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),n.call(null,t,e)})},n);else{var e={};l.eachSeries(v(t),function(n,i){t[n](function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e[n]=r,i(t)})},function(t){n(t,e)})}},l.iterator=function(t){var n=function(e){var i=function(){return t.length&&t[e].apply(null,arguments),i.next()};return i.next=function(){return e<t.length-1?n(e+1):null},i};return n(0)},l.apply=function(t){var n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,n.concat(Array.prototype.slice.call(arguments)))}};var A=function(t,n,e,i){var r=[];t(n,function(t,n){e(t,function(t,e){r=r.concat(e||[]),n(t)})},function(t){i(t,r)})};l.concat=g(A),l.concatSeries=m(A),l.whilst=function(t,n,e){t()?n(function(i){return i?e(i):void l.whilst(t,n,e)}):e()},l.doWhilst=function(t,n,e){t(function(i){if(i)return e(i);var r=Array.prototype.slice.call(arguments,1);n.apply(null,r)?l.doWhilst(t,n,e):e()})},l.until=function(t,n,e){t()?e():n(function(i){return i?e(i):void l.until(t,n,e)})},l.doUntil=function(t,n,e){t(function(i){if(i)return e(i);var r=Array.prototype.slice.call(arguments,1);n.apply(null,r)?e():l.doUntil(t,n,e)})},l.queue=function(t,n){function e(t,n,e,i){return t.started||(t.started=!0),f(n)||(n=[n]),0==n.length?l.setImmediate(function(){t.drain&&t.drain()}):void p(n,function(n){var r={data:n,callback:"function"==typeof i?i:null};e?t.tasks.unshift(r):t.tasks.push(r),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),l.setImmediate(t.process)})}void 0===n&&(n=1);var i=0,r={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,n){e(r,t,!1,n)},kill:function(){r.drain=null,r.tasks=[]},unshift:function(t,n){e(r,t,!0,n)},process:function(){if(!r.paused&&i<r.concurrency&&r.tasks.length){var n=r.tasks.shift();r.empty&&0===r.tasks.length&&r.empty(),i+=1;var e=function(){i-=1,n.callback&&n.callback.apply(n,arguments),r.drain&&r.tasks.length+i===0&&r.drain(),r.process()},o=a(e);t(n.data,o)}},length:function(){return r.tasks.length},running:function(){return i},idle:function(){return r.tasks.length+i===0},pause:function(){r.paused!==!0&&(r.paused=!0)},resume:function(){if(r.paused!==!1){r.paused=!1;for(var t=1;t<=r.concurrency;t++)l.setImmediate(r.process)}}};return r},l.priorityQueue=function(t,n){function e(t,n){return t.priority-n.priority}function i(t,n,e){for(var i=-1,r=t.length-1;r>i;){var o=i+(r-i+1>>>1);e(n,t[o])>=0?i=o:r=o-1}return i}function r(t,n,r,o){return t.started||(t.started=!0),f(n)||(n=[n]),0==n.length?l.setImmediate(function(){t.drain&&t.drain()}):void p(n,function(n){var a={data:n,priority:r,callback:"function"==typeof o?o:null};t.tasks.splice(i(t.tasks,a,e)+1,0,a),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),l.setImmediate(t.process)})}var o=l.queue(t,n);return o.push=function(t,n,e){r(o,t,n,e)},delete o.unshift,o},l.cargo=function(t,n){var e=!1,i=[],r={tasks:i,payload:n,saturated:null,empty:null,drain:null,drained:!0,push:function(t,e){f(t)||(t=[t]),p(t,function(t){i.push({data:t,callback:"function"==typeof e?e:null}),r.drained=!1,r.saturated&&i.length===n&&r.saturated()}),l.setImmediate(r.process)},process:function o(){if(!e){if(0===i.length)return r.drain&&!r.drained&&r.drain(),void(r.drained=!0);var a="number"==typeof n?i.splice(0,n):i.splice(0,i.length),u=d(a,function(t){return t.data});r.empty&&r.empty(),e=!0,t(u,function(){e=!1;var t=arguments;p(a,function(n){n.callback&&n.callback.apply(null,t)}),o()})}},length:function(){return i.length},running:function(){return e}};return r};var b=function(t){return function(n){var e=Array.prototype.slice.call(arguments,1);n.apply(null,e.concat([function(n){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(n?console.error&&console.error(n):console[t]&&p(e,function(n){console[t](n)}))}]))}};l.log=b("log"),l.dir=b("dir"),l.memoize=function(t,n){var e={},i={};n=n||function(t){return t};var r=function(){var r=Array.prototype.slice.call(arguments),o=r.pop(),a=n.apply(null,r);a in e?l.nextTick(function(){o.apply(null,e[a])}):a in i?i[a].push(o):(i[a]=[o],t.apply(null,r.concat([function(){e[a]=arguments;var t=i[a];delete i[a];for(var n=0,r=t.length;r>n;n++)t[n].apply(null,arguments)}])))};return r.memo=e,r.unmemoized=t,r},l.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},l.times=function(t,n,e){for(var i=[],r=0;t>r;r++)i.push(r);return l.map(i,n,e)},l.timesSeries=function(t,n,e){for(var i=[],r=0;t>r;r++)i.push(r);return l.mapSeries(i,n,e)},l.seq=function(){var t=arguments;return function(){var n=this,e=Array.prototype.slice.call(arguments),i=e.pop();l.reduce(t,e,function(t,e,i){e.apply(n,t.concat([function(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1);i(t,n)}]))},function(t,e){i.apply(n,[t].concat(e))})}},l.compose=function(){return l.seq.apply(null,Array.prototype.reverse.call(arguments))};var O=function(t,n){var e=function(){var e=this,i=Array.prototype.slice.call(arguments),r=i.pop();return t(n,function(t,n){t.apply(e,i.concat([n]))},r)};if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return e.apply(this,i)}return e};l.applyEach=g(O),l.applyEachSeries=m(O),l.forever=function(t,n){function e(i){if(i){if(n)return n(i);throw i}t(e)}e()},"undefined"!=typeof t&&t.exports?t.exports=l:(i=[],r=function(){return l}.apply(n,i),!(void 0!==r&&(t.exports=r)))}()}).call(n,e(3),e(2).setImmediate)},function(t,n,e){"use strict";t.exports=e(8)},function(t,n){"use strict";t.exports=function(t,n){if(0===t)return"NORTH";if(1===t)return"SOUTH";var e=t-2,i=2*n,r=n,o=Math.floor(e/(i*r)),a=Math.floor((e-o*i*r)/r),u=e-o*i*r-a*r;return[o,a,u]}},function(t,n,e){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),o=e(6),a=function(){function t(n,e,r){i(this,t),this._parent=n,this._i=e,this._data={},this._adjacentFields=null,this._data.current=r||{}}return r(t,[{key:"adjacent",value:function(t){return this._adjacentFields[t]}},{key:"adjacents",value:function(){return this._adjacentFields}},{key:"_sxy",get:function(){return o(this._i,this._parent._divisions)}},{key:"data",get:function(){return this._parent._iteration&&this._data.hasOwnProperty(this._parent._iteration.previous)&&(this._data.current=this._data[this._parent._iteration.previous],delete this._data[this._parent._iteration.previous]),this._data.current},set:function(t){this._parent._iteration?this._data[this._parent._iteration.current]=t:this._data.current=t}},{key:"position",get:function(){return{"λ":this._parent._positions[2*this._i],"φ":this._parent._positions[2*this._i+1]}},set:function(t){this._parent._positions[2*this._i]=t.λ,this._parent._positions[2*this._i+1]=t.φ}}]),t}();t.exports=a},function(t,n,e){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),o=5,a={divisions:8},u=e(10),c=e(1),l=e(7),s=function(){function t(n){i(this,t);var e=n||{},r={};if(e.data){if(!this.validate(e.data))throw new Error("Invalid data provided.");r=e.data}var s=this._divisions=Math.max(r.divisions||e.divisions||a.divisions,1),f=2*o*s*s+2;this._Fields=[],this._positions=new Float64Array(2*f);for(var p=0;f>p;p+=1)this._Fields[p]=new l(this,p,r.fields?r.fields[p]:void 0);this._Fields.forEach(u),c.populate(this)}return r(t,[{key:"get",value:function(t,n,e){var i=this._divisions;return"NORTH"===t?this._Fields[0]:"SOUTH"===t?this._Fields[1]:this._Fields[t*i*i*2+n*i+e+2]}}]),t}();s.prototype.serialize=e(11),s.prototype.validate=e(13),s.prototype.iterate=e(9),s.prototype.toCG=e(12),t.exports=s},function(t,n,e){"use strict";var i=e(4),r=0;t.exports=function(t,n){var e=this,o=arguments;this._iteration?this._iteration.current=r:this._iteration={current:r};var a=function(n,e){t.call(n,e)};i.parallel([function(n){t.call(e.get("NORTH"),n)},function(n){t.call(e.get("SOUTH"),n)},function(t){i.each(e._Fields,a,t)}],function(){e._iteration.previous=r,e._iteration.current=null,r+=1,n.apply(null,o)})}},function(t,n){"use strict";var e=5;t.exports=function(t){var n=t._parent,i=n._divisions,r=t._sxy,o=t._i<2||0===r[2]&&(r[1]+1)%i===0,a={x:2*i-1,y:i-1};if("NORTH"===r)t._adjacentFields=[n.get(0,0,0),n.get(1,0,0),n.get(2,0,0),n.get(3,0,0),n.get(4,0,0)];else if("SOUTH"===r)t._adjacentFields=[n.get(0,a.x,a.y),n.get(1,a.x,a.y),n.get(2,a.x,a.y),n.get(3,a.x,a.y),n.get(4,a.x,a.y)];else{var u=(r[0]+1+e)%e,c=(r[0]-1+e)%e,l=r[0],s=r[1],f=r[2];t._adjacentFields=[],s>0?t._adjacentFields[0]=n.get(l,s-1,f):0===f?t._adjacentFields[0]=n.get("NORTH"):t._adjacentFields[0]=n.get(c,f-1,0),0===s?t._adjacentFields[1]=n.get(c,f,0):f===a.y?s>i?t._adjacentFields[1]=n.get(c,a.x,s-i):t._adjacentFields[1]=n.get(c,s+i-1,0):t._adjacentFields[1]=n.get(l,s-1,f+1),f<a.y?t._adjacentFields[2]=n.get(l,s,f+1):s===a.x&&f===a.y?t._adjacentFields[2]=n.get("SOUTH"):s>=i?t._adjacentFields[2]=n.get(c,a.x,s-i+1):t._adjacentFields[2]=n.get(c,s+i,0),o?s===i-1?(t._adjacentFields[3]=n.get(l,s+1,0),t._adjacentFields[4]=n.get(u,0,a.y)):s===a.x&&(t._adjacentFields[3]=n.get(u,i,a.y),t._adjacentFields[4]=n.get(u,i-1,a.y)):(s===a.x?t._adjacentFields[3]=n.get(u,f+i,a.y):t._adjacentFields[3]=n.get(l,s+1,f),s===a.x?t._adjacentFields[4]=n.get(u,f+i-1,a.y):0===f?i>s?t._adjacentFields[4]=n.get(u,0,s+1):t._adjacentFields[4]=n.get(u,s-i+1,a.y):t._adjacentFields[4]=n.get(l,s+1,f-1),f>0?t._adjacentFields[5]=n.get(l,s,f-1):0===f&&(i>s?t._adjacentFields[5]=n.get(u,0,s):t._adjacentFields[5]=n.get(u,s-i,a.y)))}}},function(t,n){"use strict";function e(t){return t.data?JSON.parse(JSON.stringify(t.data)):{}}t.exports=function(){var t={};return t.fields=[],t.divisions=this._divisions,this._Fields.forEach(function(n,i){t.fields[i]=e(n)}),t}},function(t,n,e){"use strict";function i(t){for(var n=t._Fields.length,e=new Uint32Array(3*(2*n-4)),i=0;n>i;i+=1){var r=t._Fields[i];if(i>1){var o=r._adjacentFields[0]._i,a=r._adjacentFields[1]._i,u=r._adjacentFields[2]._i,c=2*i-4,l=2*i-3;e[3*c+0]=a,e[3*c+1]=o,e[3*c+2]=i,e[3*l+0]=u,e[3*l+1]=a,e[3*l+2]=i}}return e}function r(t,n,e){for(var r=t._Fields.length,o=new Float32Array(3*r),a=i(t),u=new Float32Array(3*a.length),c=0;c<t._Fields.length;c+=1){var l=t._Fields[c],f=s(l.position,1),p=n.colorFn.call(l);o[3*c+0]=f.x,o[3*c+1]=f.y,o[3*c+2]=f.z,u[3*c+0]=p.r,u[3*c+1]=p.g,u[3*c+2]=p.b}var d=o.slice(0);e&&e.call(null,null,{positions:o,normals:d,indices:a,colors:u})}function o(t,n,e,i){var r=2*n-4,o=2*n-3;return t[3*r+1]!==e&&t[3*r+1]!==i||t[3*r+0]!==e&&t[3*r+0]!==i?t[3*o+1]!==e&&t[3*o+1]!==i||t[3*o+0]!==e&&t[3*o+0]!==i?-1:o:r}function a(t,n,e,i){var r;if(r=o(t,n,e,i),r>=0)return r;if(r=o(t,e,n,i),r>=0)return r;if(r=o(t,i,n,e),r>=0)return r;throw new Error("Could not find face index for triangle.")}function u(t,n,e){for(var r=[0,2,1,0,4,2,4,3,2],o=[0,2,1,0,3,2,0,5,3,5,4,3],u=i(t),c=u.length/3,f=t._Fields.length,p=new Uint32Array(f),d=new Float32Array(3*c),h=6*f-12,v=4*f-12,y=new Uint32Array(3*v),g=new Float32Array(3*h),_=new Float32Array(3*h),m=new Float32Array(3*h),x=0;3*c>x;x+=3){var F=s(l(t._Fields[u[x+0]].position,t._Fields[u[x+1]].position,t._Fields[u[x+2]].position));d[x+0]=F.x,d[x+1]=F.y,d[x+2]=F.z}for(var w=0,j=0,T=0;f>T;T+=1){var k=t._Fields[T],A=k._adjacentFields.length,b=n.colorFn.call(k),O=s(k.position,1),I=[];p[T]=w;for(var S=0;A>S;S+=1){var M=w+S,E=k.adjacent(S)._i,H=k.adjacent((S+A+1)%A)._i,z=a(u,k._i,E,H);I.push(z),g[3*M+0]=d[3*z+0],g[3*M+1]=d[3*z+1],g[3*M+2]=d[3*z+2],m[3*M+0]=b.r,m[3*M+1]=b.g,m[3*M+2]=b.b,_[3*M+0]=O.x,_[3*M+1]=O.y,_[3*M+2]=O.z}for(var U=5===A?r:o,P=0;P<U.length;P+=1){var N=j+P;y[N]=w+U[P]}w+=A,j+=U.length}e.call(null,null,{positions:g,indices:y,normals:_,colors:m})}function c(t,n){switch(t.type){case"poly-per-field":return u(this,t,n);case"vertex-per-field":default:return r(this,t,n)}}var l=e(1).centroid,s=e(1).toCartesian;t.exports=c},function(t,n){"use strict";function e(t){return"Object"===t.constructor.name}var i=5;t.exports=function(t){if(t.hasOwnProperty("fields")&&t.hasOwnProperty("divisions")){var n=t.divisions;if("Number"===n.constructor.name&&n>0&&"Array"===t.fields.constructor.name&&t.fields.length===n*n*2*i+2){for(var r=0;r<t.fields.length;r+=1)if(!e(t.fields[r]))return!1;return!0}return!1}return!1}},function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){return{r:235*e,g:246*e,b:247*e}};var e=1/225;n.highlightIcosahedron=function(){var t=this._parent._divisions,n=this._sxy,i=this._i<2||(n[1]+n[2]+1)%t===0||(n[1]+1)%t===0||0===n[2];return i?{r:134*e,g:171*e,b:165*e}:{r:0*e,g:108*e,b:127*e}}}]);