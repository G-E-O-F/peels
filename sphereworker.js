!function(t){function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";function i(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n["default"]=t,n}function r(t){return t&&t.__esModule?t:{"default":t}}function o(t){return Math.max(Math.min(t,255),0)}var a=e(7),u=r(a),c=e(17),s=i(c);onmessage=function(t){var n=t.data||{},e=new u["default"](n),i=s[n.coloration]?s[n.coloration]:s["default"];"useRGB"===n.coloration&&n.imageData?e.fromRaster(n.imageData,n.imageWidth,n.imageHeight,4,function(t,n,e){this.data={r:o(t),g:o(n),b:o(e)}},function(){e.toCG({colorFn:i,type:n.geometryType||"fields"},function(t,n){postMessage(n)})}):e.toCG({colorFn:i,type:n.geometryType||"fields"},function(t,n){postMessage(n)})}},function(t,n,e){"use strict";function i(){for(var t=this._Fields.length,n=l(t-1,3*(2*t-4)),e=0;t>e;e+=1){var i=this._Fields[e];if(e>1){var r=i._adjacentFields[0]._i,o=i._adjacentFields[1]._i,a=i._adjacentFields[2]._i,u=2*e-4,c=2*e-3;n[3*u+0]=o,n[3*u+1]=r,n[3*u+2]=e,n[3*c+0]=a,n[3*c+1]=o,n[3*c+2]=e}}return n}function r(){for(var t=this._interfieldTriangles.length/3,n=new Float64Array(2*t),e=0;t>e;e+=1){var i=s(this._Fields[this._interfieldTriangles[3*e+0]].position,this._Fields[this._interfieldTriangles[3*e+1]].position,this._Fields[this._interfieldTriangles[3*e+2]].position);n[2*e+0]=i.φ,n[2*e+1]=i.λ}return n}function o(t,n,e){var i=this._interfieldTriangles,r=2*t-4,o=2*t-3;return i[3*r+1]!==n&&i[3*r+1]!==e||i[3*r+0]!==n&&i[3*r+0]!==e?i[3*o+1]!==n&&i[3*o+1]!==e||i[3*o+0]!==n&&i[3*o+0]!==e?-1:o:r}function a(t,n,e){var i;if(i=o.call(this,t,n,e),i>=0)return i;if(i=o.call(this,n,t,e),i>=0)return i;if(i=o.call(this,e,t,n),i>=0)return i;throw new Error("Could not find triangle index for faces: "+t+", "+n+", "+e)}function u(){for(var t=this._Fields.length,n=l(this._interfieldTriangles.length/3,6*t),e=0;t>e;e+=1)for(var i=this._Fields[e],r=i._adjacentFields.length,o=0;r>o;o+=1){var u=i.adjacent(o)._i,c=i.adjacent((o+1)%r)._i;n[6*e+o]=a.call(this,i._i,u,c)}return n}function c(){this._interfieldTriangles||(this._interfieldTriangles=i.call(this)),this._interfieldCentroids||(this._interfieldCentroids=r.call(this)),this._interfieldIndices||(this._interfieldIndices=u.call(this))}var s=e(2).centroid,l=e(4);t.exports=c},function(t,n){"use strict";function e(t,n){var e=n||1;return{x:e*v(t.φ)*v(t.λ),z:e*v(t.φ)*y(t.λ),y:e*y(t.φ)}}function i(t){var n=t.x,e=t.y,i=t.z,r=g(n*n+e*e+i*i);return{r:r,"φ":p(e/r),"λ":h(i,n)}}function r(t,n){return 2*p(g(Math.pow(y((t.φ-n.φ)/2),2)+v(t.φ)*v(n.φ)*Math.pow(y((t.λ-n.λ)/2),2)))}function o(t,n){var e,i=r(t,n),o={};return e=y(n.λ-t.λ)<0?d((y(n.φ)-y(t.φ)*v(i))/(y(i)*v(t.φ))):2*f-d((y(n.φ)-y(t.φ)*v(i))/(y(i)*v(t.φ))),o.d=i,o.a=e,o}function a(t,n){var e=Math.cos(n.φ)*Math.cos(n.λ-t.λ),i=Math.cos(n.φ)*Math.sin(n.λ-t.λ);return{"φ":h(y(t.φ)+y(n.φ),g((v(t.φ)+e)*(v(t.φ)+e)+i*i)),"λ":t.λ+h(i,v(t.φ)+e)}}function u(t,n,e){for(var i=[],o=1;e>o;o+=1){var a=o/e,u=r(t,n),c=y((1-a)*u)/y(u),s=y(a*u)/y(u),l=c*v(t.φ)*v(t.λ)+s*v(n.φ)*v(n.λ),f=c*v(t.φ)*y(t.λ)+s*v(n.φ)*y(n.λ),d=c*y(t.φ)+s*y(n.φ);i.push({"φ":h(d,g(Math.pow(l,2)+Math.pow(f,2))),"λ":h(f,l)})}return i}function c(){for(var t=arguments,n={x:0,y:0,z:0},r={},o=function(i){var r=e(t[i]);m.forEach(function(t){n[t]+=r[t]})},a=0;a<arguments.length;a+=1)o(a);m.forEach(function(e){r[e]=n[e]/t.length});var u=i(r);return{"φ":u.φ,"λ":u.λ}}function s(){var t=this._divisions,n={x:2*t-1,y:t-1};this.get("SOUTH").position={"λ":0,"φ":f/-2},this.get("NORTH").position={"λ":0,"φ":f/2};for(var e=0;l>e;e+=1){var i=2*e/5*f,r=2*e/5*f+f/5;this.get(e,t-1,0).position={"λ":i,"φ":f/2-_},this.get(e,n.x,0).position={"λ":r,"φ":f/-2+_}}if(t-1>0)for(var o=0;l>o;o+=1)for(var a=(o+4)%5,c=this.get("NORTH"),s=this.get("SOUTH"),d=this.get(o,t-1,0),p=this.get(a,t-1,0),h=this.get(o,n.x,0),v=this.get(a,n.x,0),y=u(c.position,d.position,t),g=u(d.position,p.position,t),m=u(d.position,v.position,t),x=u(d.position,h.position,t),F=u(h.position,v.position,t),w=u(h.position,s.position,t),T=1;t>T;T+=1){var j=this.get(o,T-1,0),k=this.get(o,t-1-T,T),b=this.get(o,t-1,T),I=this.get(o,t-1+T,0),A=this.get(o,n.x-T,T),M=this.get(o,n.x,T);j.position=y[T-1],k.position=g[T-1],b.position=m[T-1],I.position=x[T-1],A.position=F[T-1],M.position=w[T-1]}if(t-2>0)for(var O=0;l>O;O+=1)for(var S=0;2*t>S;S+=1)if((S+1)%t>0)for(var E=t-(S+1)%t,C=E-1,H=t-1-E,P=this.get(O,S,0),z=this.get(O,S,E),R=this.get(O,S,t-1)._adjacentFields[2],U=u(P.position,z.position,C+1),N=u(z.position,R.position,H+1),L=1;t>L;L+=1)E>L&&(this.get(O,S,L).position=U[L-1]),L>E&&(this.get(O,S,L).position=N[L-E-1])}var l=5,f=Math.PI,d=Math.acos,p=Math.asin,h=Math.atan2,v=Math.cos,y=Math.sin,g=Math.sqrt,_=d(Math.sqrt(5)/5),m=["x","y","z"];t.exports={populate:s,toCartesian:e,centroid:c,midpoint:a,interpolate:u,course:o,distance:r}},function(t,n,e){(function(t,i){function r(t,n){this._id=t,this._clearFn=n}var o=e(5).nextTick,a=Function.prototype.apply,u=Array.prototype.slice,c={},s=0;n.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;n>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},n))},n.setImmediate="function"==typeof t?t:function(t){var e=s++,i=arguments.length<2?!1:u.call(arguments,1);return c[e]=!0,o(function(){c[e]&&(i?t.apply(null,i):t.call(null),n.clearImmediate(e))}),e},n.clearImmediate="function"==typeof i?i:function(t){delete c[t]}}).call(n,e(3).setImmediate,e(3).clearImmediate)},function(t,n){"use strict";function e(t,n){return i>=t?new Uint8Array(n):r>=t?new Uint16Array(n):o>=t?new Uint32Array(n):(console.warn("Indices are too large for a typed array buffer."),new Array(n))}var i=parseInt("11111111",2),r=parseInt("1111111111111111",2),o=parseInt("11111111111111111111111111111111",2);t.exports=e},function(t,n){function e(){s=!1,a.length?c=a.concat(c):l=-1,c.length&&i()}function i(){if(!s){var t=setTimeout(e);s=!0;for(var n=c.length;n;){for(a=c,c=[];++l<n;)a&&a[l].run();l=-1,n=c.length}a=null,s=!1,clearTimeout(t)}}function r(t,n){this.fun=t,this.array=n}function o(){}var a,u=t.exports={},c=[],s=!1,l=-1;u.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new r(t,n)),1!==c.length||s||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(t,n,e){var i,r;(function(e,o){/*!
	 * async
	 * https://github.com/caolan/async
	 *
	 * Copyright 2010-2014 Caolan McMahon
	 * Released under the MIT license
	 */
!function(){function a(t){var n=!1;return function(){if(n)throw new Error("Callback was already called.");n=!0,t.apply(u,arguments)}}var u,c,s={};u=this,null!=u&&(c=u.async),s.noConflict=function(){return u.async=c,s};var l=Object.prototype.toString,f=Array.isArray||function(t){return"[object Array]"===l.call(t)},d=function(t,n){for(var e=0;e<t.length;e+=1)n(t[e],e,t)},p=function(t,n){if(t.map)return t.map(n);var e=[];return d(t,function(t,i,r){e.push(n(t,i,r))}),e},h=function(t,n,e){return t.reduce?t.reduce(n,e):(d(t,function(t,i,r){e=n(e,t,i,r)}),e)},v=function(t){if(Object.keys)return Object.keys(t);var n=[];for(var e in t)t.hasOwnProperty(e)&&n.push(e);return n};"undefined"!=typeof e&&e.nextTick?(s.nextTick=e.nextTick,"undefined"!=typeof o?s.setImmediate=function(t){o(t)}:s.setImmediate=s.nextTick):"function"==typeof o?(s.nextTick=function(t){o(t)},s.setImmediate=s.nextTick):(s.nextTick=function(t){setTimeout(t,0)},s.setImmediate=s.nextTick),s.each=function(t,n,e){function i(n){n?(e(n),e=function(){}):(r+=1,r>=t.length&&e())}if(e=e||function(){},!t.length)return e();var r=0;d(t,function(t){n(t,a(i))})},s.forEach=s.each,s.eachSeries=function(t,n,e){if(e=e||function(){},!t.length)return e();var i=0,r=function(){n(t[i],function(n){n?(e(n),e=function(){}):(i+=1,i>=t.length?e():r())})};r()},s.forEachSeries=s.eachSeries,s.eachLimit=function(t,n,e,i){var r=y(n);r.apply(null,[t,e,i])},s.forEachLimit=s.eachLimit;var y=function(t){return function(n,e,i){if(i=i||function(){},!n.length||0>=t)return i();var r=0,o=0,a=0;!function u(){if(r>=n.length)return i();for(;t>a&&o<n.length;)o+=1,a+=1,e(n[o-1],function(t){t?(i(t),i=function(){}):(r+=1,a-=1,r>=n.length?i():u())})}()}},g=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[s.each].concat(n))}},_=function(t,n){return function(){var e=Array.prototype.slice.call(arguments);return n.apply(null,[y(t)].concat(e))}},m=function(t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[s.eachSeries].concat(n))}},x=function(t,n,e,i){if(n=p(n,function(t,n){return{index:n,value:t}}),i){var r=[];t(n,function(t,n){e(t.value,function(e,i){r[t.index]=i,n(e)})},function(t){i(t,r)})}else t(n,function(t,n){e(t.value,function(t){n(t)})})};s.map=g(x),s.mapSeries=m(x),s.mapLimit=function(t,n,e,i){return F(n)(t,e,i)};var F=function(t){return _(t,x)};s.reduce=function(t,n,e,i){s.eachSeries(t,function(t,i){e(n,t,function(t,e){n=e,i(t)})},function(t){i(t,n)})},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(t,n,e,i){var r=p(t,function(t){return t}).reverse();s.reduce(r,n,e,i)},s.foldr=s.reduceRight;var w=function(t,n,e,i){var r=[];n=p(n,function(t,n){return{index:n,value:t}}),t(n,function(t,n){e(t.value,function(e){e&&r.push(t),n()})},function(t){i(p(r.sort(function(t,n){return t.index-n.index}),function(t){return t.value}))})};s.filter=g(w),s.filterSeries=m(w),s.select=s.filter,s.selectSeries=s.filterSeries;var T=function(t,n,e,i){var r=[];n=p(n,function(t,n){return{index:n,value:t}}),t(n,function(t,n){e(t.value,function(e){e||r.push(t),n()})},function(t){i(p(r.sort(function(t,n){return t.index-n.index}),function(t){return t.value}))})};s.reject=g(T),s.rejectSeries=m(T);var j=function(t,n,e,i){t(n,function(t,n){e(t,function(e){e?(i(t),i=function(){}):n()})},function(t){i()})};s.detect=g(j),s.detectSeries=m(j),s.some=function(t,n,e){s.each(t,function(t,i){n(t,function(t){t&&(e(!0),e=function(){}),i()})},function(t){e(!1)})},s.any=s.some,s.every=function(t,n,e){s.each(t,function(t,i){n(t,function(t){t||(e(!1),e=function(){}),i()})},function(t){e(!0)})},s.all=s.every,s.sortBy=function(t,n,e){s.map(t,function(t,e){n(t,function(n,i){n?e(n):e(null,{value:t,criteria:i})})},function(t,n){if(t)return e(t);var i=function(t,n){var e=t.criteria,i=n.criteria;return i>e?-1:e>i?1:0};e(null,p(n.sort(i),function(t){return t.value}))})},s.auto=function(t,n){n=n||function(){};var e=v(t),i=e.length;if(!i)return n();var r={},o=[],a=function(t){o.unshift(t)},u=function(t){for(var n=0;n<o.length;n+=1)if(o[n]===t)return void o.splice(n,1)},c=function(){i--,d(o.slice(0),function(t){t()})};a(function(){if(!i){var t=n;n=function(){},t(null,r)}}),d(e,function(e){var i=f(t[e])?t[e]:[t[e]],o=function(t){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1&&(i=i[0]),t){var o={};d(v(r),function(t){o[t]=r[t]}),o[e]=i,n(t,o),n=function(){}}else r[e]=i,s.setImmediate(c)},l=i.slice(0,Math.abs(i.length-1))||[],p=function(){return h(l,function(t,n){return t&&r.hasOwnProperty(n)},!0)&&!r.hasOwnProperty(e)};if(p())i[i.length-1](o,r);else{var y=function(){p()&&(u(y),i[i.length-1](o,r))};a(y)}})},s.retry=function(t,n,e){var i=5,r=[];"function"==typeof t&&(e=n,n=t,t=i),t=parseInt(t,10)||i;var o=function(i,o){for(var a=function(t,n){return function(e){t(function(t,i){e(!t||n,{err:t,result:i})},o)}};t;)r.push(a(n,!(t-=1)));s.series(r,function(t,n){n=n[n.length-1],(i||e)(n.err,n.result)})};return e?o():o},s.waterfall=function(t,n){if(n=n||function(){},!f(t)){var e=new Error("First argument to waterfall must be an array of functions");return n(e)}if(!t.length)return n();var i=function(t){return function(e){if(e)n.apply(null,arguments),n=function(){};else{var r=Array.prototype.slice.call(arguments,1),o=t.next();o?r.push(i(o)):r.push(n),s.setImmediate(function(){t.apply(null,r)})}}};i(s.iterator(t))()};var k=function(t,n,e){if(e=e||function(){},f(n))t.map(n,function(t,n){t&&t(function(t){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),n.call(null,t,e)})},e);else{var i={};t.each(v(n),function(t,e){n[t](function(n){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),i[t]=r,e(n)})},function(t){e(t,i)})}};s.parallel=function(t,n){k({map:s.map,each:s.each},t,n)},s.parallelLimit=function(t,n,e){k({map:F(n),each:y(n)},t,e)},s.series=function(t,n){if(n=n||function(){},f(t))s.mapSeries(t,function(t,n){t&&t(function(t){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),n.call(null,t,e)})},n);else{var e={};s.eachSeries(v(t),function(n,i){t[n](function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e[n]=r,i(t)})},function(t){n(t,e)})}},s.iterator=function(t){var n=function(e){var i=function(){return t.length&&t[e].apply(null,arguments),i.next()};return i.next=function(){return e<t.length-1?n(e+1):null},i};return n(0)},s.apply=function(t){var n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,n.concat(Array.prototype.slice.call(arguments)))}};var b=function(t,n,e,i){var r=[];t(n,function(t,n){e(t,function(t,e){r=r.concat(e||[]),n(t)})},function(t){i(t,r)})};s.concat=g(b),s.concatSeries=m(b),s.whilst=function(t,n,e){t()?n(function(i){return i?e(i):void s.whilst(t,n,e)}):e()},s.doWhilst=function(t,n,e){t(function(i){if(i)return e(i);var r=Array.prototype.slice.call(arguments,1);n.apply(null,r)?s.doWhilst(t,n,e):e()})},s.until=function(t,n,e){t()?e():n(function(i){return i?e(i):void s.until(t,n,e)})},s.doUntil=function(t,n,e){t(function(i){if(i)return e(i);var r=Array.prototype.slice.call(arguments,1);n.apply(null,r)?e():s.doUntil(t,n,e)})},s.queue=function(t,n){function e(t,n,e,i){return t.started||(t.started=!0),f(n)||(n=[n]),0==n.length?s.setImmediate(function(){t.drain&&t.drain()}):void d(n,function(n){var r={data:n,callback:"function"==typeof i?i:null};e?t.tasks.unshift(r):t.tasks.push(r),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),s.setImmediate(t.process)})}void 0===n&&(n=1);var i=0,r={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,n){e(r,t,!1,n)},kill:function(){r.drain=null,r.tasks=[]},unshift:function(t,n){e(r,t,!0,n)},process:function(){if(!r.paused&&i<r.concurrency&&r.tasks.length){var n=r.tasks.shift();r.empty&&0===r.tasks.length&&r.empty(),i+=1;var e=function(){i-=1,n.callback&&n.callback.apply(n,arguments),r.drain&&r.tasks.length+i===0&&r.drain(),r.process()},o=a(e);t(n.data,o)}},length:function(){return r.tasks.length},running:function(){return i},idle:function(){return r.tasks.length+i===0},pause:function(){r.paused!==!0&&(r.paused=!0)},resume:function(){if(r.paused!==!1){r.paused=!1;for(var t=1;t<=r.concurrency;t++)s.setImmediate(r.process)}}};return r},s.priorityQueue=function(t,n){function e(t,n){return t.priority-n.priority}function i(t,n,e){for(var i=-1,r=t.length-1;r>i;){var o=i+(r-i+1>>>1);e(n,t[o])>=0?i=o:r=o-1}return i}function r(t,n,r,o){return t.started||(t.started=!0),f(n)||(n=[n]),0==n.length?s.setImmediate(function(){t.drain&&t.drain()}):void d(n,function(n){var a={data:n,priority:r,callback:"function"==typeof o?o:null};t.tasks.splice(i(t.tasks,a,e)+1,0,a),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),s.setImmediate(t.process)})}var o=s.queue(t,n);return o.push=function(t,n,e){r(o,t,n,e)},delete o.unshift,o},s.cargo=function(t,n){var e=!1,i=[],r={tasks:i,payload:n,saturated:null,empty:null,drain:null,drained:!0,push:function(t,e){f(t)||(t=[t]),d(t,function(t){i.push({data:t,callback:"function"==typeof e?e:null}),r.drained=!1,r.saturated&&i.length===n&&r.saturated()}),s.setImmediate(r.process)},process:function o(){if(!e){if(0===i.length)return r.drain&&!r.drained&&r.drain(),void(r.drained=!0);var a="number"==typeof n?i.splice(0,n):i.splice(0,i.length),u=p(a,function(t){return t.data});r.empty&&r.empty(),e=!0,t(u,function(){e=!1;var t=arguments;d(a,function(n){n.callback&&n.callback.apply(null,t)}),o()})}},length:function(){return i.length},running:function(){return e}};return r};var I=function(t){return function(n){var e=Array.prototype.slice.call(arguments,1);n.apply(null,e.concat([function(n){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(n?console.error&&console.error(n):console[t]&&d(e,function(n){console[t](n)}))}]))}};s.log=I("log"),s.dir=I("dir"),s.memoize=function(t,n){var e={},i={};n=n||function(t){return t};var r=function(){var r=Array.prototype.slice.call(arguments),o=r.pop(),a=n.apply(null,r);a in e?s.nextTick(function(){o.apply(null,e[a])}):a in i?i[a].push(o):(i[a]=[o],t.apply(null,r.concat([function(){e[a]=arguments;var t=i[a];delete i[a];for(var n=0,r=t.length;r>n;n++)t[n].apply(null,arguments)}])))};return r.memo=e,r.unmemoized=t,r},s.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},s.times=function(t,n,e){for(var i=[],r=0;t>r;r++)i.push(r);return s.map(i,n,e)},s.timesSeries=function(t,n,e){for(var i=[],r=0;t>r;r++)i.push(r);return s.mapSeries(i,n,e)},s.seq=function(){var t=arguments;return function(){var n=this,e=Array.prototype.slice.call(arguments),i=e.pop();s.reduce(t,e,function(t,e,i){e.apply(n,t.concat([function(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1);i(t,n)}]))},function(t,e){i.apply(n,[t].concat(e))})}},s.compose=function(){return s.seq.apply(null,Array.prototype.reverse.call(arguments))};var A=function(t,n){var e=function(){var e=this,i=Array.prototype.slice.call(arguments),r=i.pop();return t(n,function(t,n){t.apply(e,i.concat([n]))},r)};if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return e.apply(this,i)}return e};s.applyEach=g(A),s.applyEachSeries=m(A),s.forever=function(t,n){function e(i){if(i){if(n)return n(i);throw i}t(e)}e()},"undefined"!=typeof t&&t.exports?t.exports=s:(i=[],r=function(){return s}.apply(n,i),!(void 0!==r&&(t.exports=r)))}()}).call(n,e(5),e(3).setImmediate)},function(t,n,e){"use strict";t.exports=e(11)},function(t,n){"use strict";t.exports=function(t,n){if(0===t)return"NORTH";if(1===t)return"SOUTH";var e=t-2,i=2*n,r=n,o=Math.floor(e/(i*r)),a=Math.floor((e-o*i*r)/r),u=e-o*i*r-a*r;return[o,a,u]}},function(t,n,e){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),o=e(8),a=function(){function t(n,e,r){i(this,t),this._parent=n,this._i=e,this._data={},this._adjacentFields=null,this._data.current=r||{}}return r(t,[{key:"adjacent",value:function(t){return this._adjacentFields[t]}},{key:"adjacents",value:function(){return this._adjacentFields}},{key:"_sxy",get:function(){return o(this._i,this._parent._divisions)}},{key:"data",get:function(){return this._parent._iteration&&this._data.hasOwnProperty(this._parent._iteration.previous)&&(this._data.current=this._data[this._parent._iteration.previous],delete this._data[this._parent._iteration.previous]),this._data.current},set:function(t){this._parent._iteration?this._data[this._parent._iteration.current]=t:this._data.current=t}},{key:"position",get:function(){return{"λ":this._parent._positions[2*this._i],"φ":this._parent._positions[2*this._i+1]}},set:function(t){this._parent._positions[2*this._i]=t.λ,this._parent._positions[2*this._i+1]=t.φ}}]),t}();t.exports=a},function(t,n,e){"use strict";function i(){for(var t=-(1/0),n=1/0,e=-(1/0),i=1/0,r=[],o=this._parent._interfieldIndices,a=this._parent._interfieldCentroids,u=this._i,c=0;c<this._adjacentFields.length;c+=1){var l=a[2*o[6*u+c]+0],f=a[2*o[6*u+c]+1];t=Math.max(t,l),n=Math.min(n,l),e=Math.max(e,f),i=Math.min(i,f),r.push([f,l])}return 0===u&&(t=s/2),1===u&&(n=s/-2),2>u&&(i=-s,e=s,r=[[i,t],[e,t],[e,n],[i,n]]),{"min_φ":n,"max_φ":t,"min_λ":i,"max_λ":e,vertices:r}}function r(t,n,e){for(var i=l/n,r=s/e,o=[],a=Math.floor(t.min_λ/i+n/2),c=Math.ceil(t.max_λ/i+n/2),f=Math.floor(t.min_φ/r+e/2),d=Math.ceil(t.max_φ/r+e/2),p=a;c>=p;p+=1){o[p]=[];for(var h=f;d>=h;h+=1)o[p][h]=u([p*i-s,h*r-s/2],t.vertices)}return{min_x:a,max_x:c,min_y:f,max_y:d,grid:o}}function o(t,n,e){var i=0;return t[n+0][e+0]&&i++,t[n+0][e+1]&&i++,t[n+1][e+0]&&i++,t[n+1][e+1]&&i++,i}function a(t,n,e,a,u,s){var l=this;c.call(l),l.iterate(function(c){for(var s=i.call(this),l=r(s,n,e),f=[],d=0,p=0;a>p;p+=1)f[p]=0;for(var h=l.min_x;h<l.max_x;h+=1)for(var v=l.min_y;v<l.max_y;v+=1){for(var y=o(l.grid,h,v)/4,g=0;a>g;g+=1)f[g]+=t[(e-v-1)*n*a+(n-h-1)*a+g]*y;d+=y}u.apply(this,f.map(function(t){return t/d})),c()},s)}var u=e(18),c=e(1),s=Math.PI,l=2*Math.PI;t.exports=a},function(t,n,e){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),o=5,a={divisions:8},u=e(13),c=e(2).populate,s=e(9),l=function(){function t(n){i(this,t);var e=n||{},r={};if(e.data){if(!this.validate(e.data))throw new Error("Invalid data provided.");r=e.data}var l=this._divisions=Math.max(r.divisions||e.divisions||a.divisions,1),f=2*o*l*l+2;this._Fields=[],this._positions=new Float64Array(2*f);for(var d=0;f>d;d+=1)this._Fields[d]=new s(this,d,r.fields?r.fields[d]:void 0);this._Fields.forEach(u),c.call(this)}return r(t,[{key:"get",value:function(t,n,e){var i=this._divisions;return"NORTH"===t?this._Fields[0]:"SOUTH"===t?this._Fields[1]:this._Fields[t*i*i*2+n*i+e+2]}}]),t}();l.prototype.fromRaster=e(10),l.prototype.serialize=e(14),l.prototype.validate=e(16),l.prototype.iterate=e(12),l.prototype.toCG=e(15),l.prototype._getTriangleIndex=e(1)._getTriangleIndex,t.exports=l},function(t,n,e){"use strict";var i=e(6),r=0;t.exports=function(t,n){var e=this,o=arguments;this._iteration?this._iteration.current=r:this._iteration={current:r};var a=function(n,e){t.call(n,e)};i.each(this._Fields,a,function(){e._iteration.previous=r,e._iteration.current=null,r+=1,n.apply(null,o)})}},function(t,n){"use strict";var e=5;t.exports=function(t){var n=t._parent,i=n._divisions,r=t._sxy,o=t._i<2||0===r[2]&&(r[1]+1)%i===0,a={x:2*i-1,y:i-1};if("NORTH"===r)t._adjacentFields=[n.get(0,0,0),n.get(1,0,0),n.get(2,0,0),n.get(3,0,0),n.get(4,0,0)];else if("SOUTH"===r)t._adjacentFields=[n.get(0,a.x,a.y),n.get(1,a.x,a.y),n.get(2,a.x,a.y),n.get(3,a.x,a.y),n.get(4,a.x,a.y)];else{var u=(r[0]+1+e)%e,c=(r[0]-1+e)%e,s=r[0],l=r[1],f=r[2];t._adjacentFields=[],l>0?t._adjacentFields[0]=n.get(s,l-1,f):0===f?t._adjacentFields[0]=n.get("NORTH"):t._adjacentFields[0]=n.get(c,f-1,0),0===l?t._adjacentFields[1]=n.get(c,f,0):f===a.y?l>i?t._adjacentFields[1]=n.get(c,a.x,l-i):t._adjacentFields[1]=n.get(c,l+i-1,0):t._adjacentFields[1]=n.get(s,l-1,f+1),f<a.y?t._adjacentFields[2]=n.get(s,l,f+1):l===a.x&&f===a.y?t._adjacentFields[2]=n.get("SOUTH"):l>=i?t._adjacentFields[2]=n.get(c,a.x,l-i+1):t._adjacentFields[2]=n.get(c,l+i,0),o?l===i-1?(t._adjacentFields[3]=n.get(s,l+1,0),t._adjacentFields[4]=n.get(u,0,a.y)):l===a.x&&(t._adjacentFields[3]=n.get(u,i,a.y),t._adjacentFields[4]=n.get(u,i-1,a.y)):(l===a.x?t._adjacentFields[3]=n.get(u,f+i,a.y):t._adjacentFields[3]=n.get(s,l+1,f),l===a.x?t._adjacentFields[4]=n.get(u,f+i-1,a.y):0===f?i>l?t._adjacentFields[4]=n.get(u,0,l+1):t._adjacentFields[4]=n.get(u,l-i+1,a.y):t._adjacentFields[4]=n.get(s,l+1,f-1),f>0?t._adjacentFields[5]=n.get(s,l,f-1):0===f&&(i>l?t._adjacentFields[5]=n.get(u,0,l):t._adjacentFields[5]=n.get(u,l-i,a.y)))}}},function(t,n){"use strict";function e(t){return t.data?JSON.parse(JSON.stringify(t.data)):{}}t.exports=function(){var t={};return t.fields=[],t.divisions=this._divisions,this._Fields.forEach(function(n,i){t.fields[i]=e(n)}),t}},function(t,n,e){"use strict";function i(t,n,e){for(var i=t._Fields.length,r=new Float32Array(3*i),o=t._interfieldTriangles,u=new Float32Array(3*o.length),c=0;c<t._Fields.length;c+=1){var s=t._Fields[c],l=a(s.position,1),f=n.colorFn.call(s);r[3*c+0]=l.x,r[3*c+1]=l.y,r[3*c+2]=l.z,u[3*c+0]=f.r,u[3*c+1]=f.g,u[3*c+2]=f.b}var d=r.slice(0);e&&e.call(null,null,{positions:r,normals:d,indices:o,colors:u})}function r(t,n,e){for(var i=[0,2,1,0,4,2,4,3,2],r=[0,2,1,0,3,2,0,5,3,5,4,3],o=[1,2,0,2,4,0,2,3,4],u=t._interfieldTriangles,s=u.length/3,l=t._Fields.length,f=6*l-12,d=4*l-12,p=c(f,l),h=new Float32Array(3*s),v=c(f,3*d),y=new Float32Array(3*f),g=new Float32Array(3*f),_=new Float32Array(3*f),m=0;s>m;m+=1){var x=a({"φ":t._interfieldCentroids[2*m+0],"λ":t._interfieldCentroids[2*m+1]});h[3*m+0]=x.x,h[3*m+1]=x.y,h[3*m+2]=x.z}for(var F=0,w=0,T=0;l>T;T+=1){var j=t._Fields[T],k=j._adjacentFields.length,b=n.colorFn.call(j),I=a(j.position,1),A=[];p[T]=F;for(var M=0;k>M;M+=1){var O=F+M,S=t._interfieldIndices[6*T+M];A.push(S),y[3*O+0]=h[3*S+0],y[3*O+1]=h[3*S+1],y[3*O+2]=h[3*S+2],_[3*O+0]=b.r,_[3*O+1]=b.g,_[3*O+2]=b.b,g[3*O+0]=I.x,g[3*O+1]=I.y,g[3*O+2]=I.z}var E=void 0;E=1===T?o:5===k?i:r;for(var C=0;C<E.length;C+=1){var H=w+C;v[H]=F+E[C]}F+=k,w+=E.length}e.call(null,null,{positions:y,indices:v,normals:g,colors:_})}function o(t,n){switch(u.call(this),t.type){case"poly-per-field":return r(this,t,n);case"vertex-per-field":default:return i(this,t,n)}}var a=e(2).toCartesian,u=e(1),c=e(4);t.exports=o},function(t,n){"use strict";function e(t){return"Object"===t.constructor.name}var i=5;t.exports=function(t){if(t.hasOwnProperty("fields")&&t.hasOwnProperty("divisions")){var n=t.divisions;if("Number"===n.constructor.name&&n>0&&"Array"===t.fields.constructor.name&&t.fields.length===n*n*2*i+2){for(var r=0;r<t.fields.length;r+=1)if(!e(t.fields[r]))return!1;return!0}return!1}return!1}},function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(){return{r:235*e,g:246*e,b:247*e}};var e=1/225;n.highlightIcosahedron=function(){var t=this._parent._divisions,n=this._sxy,i=this._i<2||(n[1]+n[2]+1)%t===0||(n[1]+1)%t===0||0===n[2];return i?{r:134*e,g:171*e,b:165*e}:{r:0*e,g:108*e,b:127*e}},n.useRGB=function(){return{r:e*this.data.r,g:e*this.data.g,b:e*this.data.b}}},function(t,n){t.exports=function(t,n){for(var e=t[0],i=t[1],r=!1,o=0,a=n.length-1;o<n.length;a=o++){var u=n[o][0],c=n[o][1],s=n[a][0],l=n[a][1],f=c>i!=l>i&&(s-u)*(i-c)/(l-c)+u>e;f&&(r=!r)}return r}}]);